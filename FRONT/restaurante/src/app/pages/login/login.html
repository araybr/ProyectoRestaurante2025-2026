<div class="login-container">
  <div class="login-card">
    <h2>{{ isRegistering ? 'Crear cuenta' : 'Iniciar sesión' }}</h2>

    @if (!isRegistering) {
      <!-- LOGIN -->
      <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
        <div class="form-group">
          <label>Email</label>
          <input type="email" formControlName="email" />
        </div>
        <div class="form-group">
          <label>Contraseña</label>
          <input type="password" formControlName="password" />
        </div>

        @if (errorMessage) {
          <p class="error">{{ errorMessage }}</p>
        }
        @if (successMessage) {
          <p class="success">{{ successMessage }}</p>
        }

        <button type="submit" [disabled]="loading">
          {{ loading ? 'Cargando...' : 'Entrar' }}
        </button>

        <p class="toggle-text">
          ¿No tienes cuenta?
          <span (click)="toggleForm()">Regístrate aquí</span>
        </p>
      </form>
    } @else {
      <!-- REGISTRO -->
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <div class="form-group">
          <label>Nombre</label>
          <input formControlName="nombre" />
        </div>
        <div class="form-group">
          <label>Apellidos</label>
          <input formControlName="apellidos" />
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" formControlName="email" />
        </div>
        <div class="form-group">
          <label>Contraseña</label>
          <input type="password" formControlName="password" />
        </div>
        <div class="form-group">
          <label>Teléfono</label>
          <input formControlName="telefono" />
        </div>

        @if (errorMessage) {
          <p class="error">{{ errorMessage }}</p>
        }
        @if (successMessage) {
          <p class="success">{{ successMessage }}</p>
        }

        <button type="submit" [disabled]="loading">
          {{ loading ? 'Creando...' : 'Registrarse' }}
        </button>

        <p class="toggle-text">
          ¿Ya tienes cuenta?
          <span (click)="toggleForm()">Inicia sesión</span>
        </p>
      </form>
    }
  </div>
</div>
